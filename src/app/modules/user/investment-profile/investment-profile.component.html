<div class="pcoded-content">
  <div class="pcoded-inner-content">
      <div class="main-body">
          <div class="page-wrapper">
              <div class="page-body">
                <div class="clearfix mb-3">
                  <div class="float-left pt-2">
                      <a class="h4 pr-2" style="font-size: 24px; font-weight: bold;">Investment</a>
                      &nbsp; &nbsp;
                      <a class=" pl-2">Home / Investment</a>
                  </div>
                  <div class="float-right">
                      <a (click)="goBack()">
                          <img class="settings" src="../assets/images/icon/icons/Back-icon.png">
                      </a>
                  </div>
              </div>
              <div *ngIf="isLoading" class="lds-default">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
              </div>
                <div class="row" *ngIf="!isLoading">
                  <div class="col-xl-12">
                      <div class="card ">
                          <div class="card-block">
                              <div class="row p-0">
                                  <div class="col-12">
                                      <p class="float-left pt-2">Investment Profile</p>
                                  </div>
                              </div>
                              <div class="dt-responsive table-responsive">
                                  <table id="order-table" class="table table-striped table-bordered nowrap">
                                      <thead>
                                          <tr>
                                              <th>Name</th>
                                              <th>Email</th>
                                              <th>Phone Number</th>
                                              <th>Slots Taken</th>
                                              <th>Amount Paid</th>
                                              <th>Date Invested</th>
                                          </tr>
                                      </thead>
                                      <tbody *ngIf="loggedInUser?.user_category==='Admin'">
                                          <tr data-href="#viewUserProfile"  (click)="viewUserDetail(user?.user_info[0])" *ngFor="let user of pool?.investment_user">
                                              <td>{{user?.user_info[0]?.first_name}} {{user?.user_info[0].last_name}}</td>
                                              <td>{{user?.user_info[0].email}}</td>
                                              <td>{{user?.user_info[0].phone_number}}</td>
                                              <td>{{user?.user_investment_info?.number_of_pools}}</td>
                                              <td>{{user?.user_investment_info?.amount_paid}}</td>
                                              <td>{{user?.user_investment_info?.created_at}}</td>
                                          </tr>
                                      </tbody>
                                      <tbody *ngIf="loggedInUser?.user_category!=='Admin'">
                                          <tr [ngStyle]="{'display': (i === 0) ? 'inline-block' : 'none'}" *ngFor="let user of pool?.investment_user; let i = index;">
                                              <td>{{user?.user_info[0]?.first_name}} {{user?.user_info[0].last_name}}</td>
                                              <td>{{user?.user_info[0].email}}</td>
                                              <td>{{user?.user_info[0].phone_number}}</td>
                                              <td>{{user?.user_investment_info?.number_of_pools}}</td>
                                              <td>{{user?.user_investment_info?.amount_paid}}</td>
                                              <td>{{user?.user_investment_info?.created_at}}</td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </div>
                </div>

                <div class="row" *ngIf="!isLoading">
                  <div class="col-xl-12">
                      <div class="card">
                          <div class="card-block">
                              <div class="row p-0">
                                  <div class="col-12">
                                      <p class="">Investment Summary</p>
                                      <hr class="new my-0">
                                  </div>
                              </div>

                              <div class="column pt-3 summary">
                                <div class="rowkini row mb-5">
                                    <div class="col-4">
                                        <div class="row justify-content-center">
                                            <div class="col-6">
                                                <span>Start Date</span>
                                            </div>
                                            <div class="col-6">
                                                <p class="">{{pool?.investment?.investment_started_date}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row justify-content-center">
                                            <div class="col-6">
                                                <span>End Date</span>
                                            </div>
                                            <div class="col-6">
                                                <p class="">{{pool?.investment?.investment_close_date}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row justify-content-center">
                                            <div class="col-6">
                                                <span>Last Payment</span>
                                            </div>
                                            <div class="col-6" *ngIf="latestReport?.created_at">
                                                <p class="">{{ latestReport?.created_at | date :  "dd.MM.y" }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="rowkeji row mt-5 mb-4">
                                    <div class="col-4">
                                        <div class="row justify-content-center">
                                            <div class="col-6">
                                                <span>Total Monthly Return</span>
                                            </div>
                                            <div class="col-6">
                                                <p class="">{{pool?.investment?.expected_return_amount * pool?.investment?.max_num_of_slots}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row justify-content-center">
                                            <div class="col-6">
                                                <span>Return Per Slot</span>
                                            </div>
                                            <div class="col-6">
                                                <p class="">{{pool?.investment?.expected_return_amount}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-4">
                                        <div class="row justify-content-center">
                                            <div class="col-6">
                                                <span>Next Payment</span>
                                            </div>
                                            <div class="col-6" *ngIf="latestReport?.created_at">
                                                <p class="">
                                                    {{ addMonth(latestReport?.created_at , 1)  | date:  "dd.MM.y" }}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="rowketa justify-content-center row">
                                    <div class="row">
                                            <span><button (click)="payInvestors(latestReport)">Pay Investors</button></span>
                                    </div>
                                </div>
                              </div>
                          </div>
                      </div>
                  </div>
                </div>
